# üö® Railway Deployment Troubleshooting

## –ü—Ä–æ–±–ª–µ–º–∞: Build Failed - vite: not found

### –ü—Ä–∏—á–∏–Ω–∞
Railway –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å `npm run build` —Å `--only=production` —Ñ–ª–∞–≥–æ–º, –Ω–æ vite –∏ –¥—Ä—É–≥–∏–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Dockerfile
```dockerfile
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –í–°–ï –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –±–∏–ª–¥–∞
RUN npm ci

# –ë–∏–ª–¥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
RUN npm run build

# –£–¥–∞–ª—è–µ–º dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –±–∏–ª–¥–∞
RUN npm prune --production
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π railway.json
```json
{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm ci && npm run build"
  },
  "deploy": {
    "startCommand": "npm start"
  }
}
```

## üîß –®–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –í Railway Dashboard:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±–∏–ª–¥–∞:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ Settings ‚Üí Build
   - –ù–∞–∂–º–∏—Ç–µ "Clear Build Cache"

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ deployment:**
   - –ù–∞–∂–º–∏—Ç–µ "Redeploy"
   - –ò–ª–∏ –∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub

### –ß–µ—Ä–µ–∑ CLI:

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
railway up --detach

# –ò–ª–∏ —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ
railway up --force
```

## üìã Checklist –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
- [ ] Vite –±–∏–ª–¥ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π railway.json
```json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "node dist/index.js"
  }
}
```

### –†–µ—à–µ–Ω–∏–µ 2: –ö–∞—Å—Ç–æ–º–Ω—ã–π build script
–í `package.json` –¥–æ–±–∞–≤–∏—Ç—å:
```json
{
  "scripts": {
    "railway:build": "npm install && npm run build",
    "railway:start": "node dist/index.js"
  }
}
```

### –†–µ—à–µ–Ω–∏–µ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í Railway Dashboard –¥–æ–±–∞–≤–∏—Ç—å:
```
NODE_ENV=production
RAILWAY_ENVIRONMENT=production
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ deployment

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ:
1. –£—Å–ø–µ—à–Ω–æ –±–∏–ª–¥–∏—Ç—å—Å—è –Ω–∞ Railway
2. –ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
3. –ë—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º –ø–æ URL

## üìû –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–∏–ª–¥–∞ –≤ Railway Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DATABASE_URL
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:
1. ‚úÖ **Build Error**: vite not found - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
2. ‚úÖ **Runtime Error**: Cannot find package 'vite' - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –†–µ—à–µ–Ω–∏–µ:
- –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π production —Å–µ—Ä–≤–µ—Ä (`server/index.production.ts`)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ (`build-production.sh`)

### –§–∞–π–ª—ã –¥–ª—è deployment:
- `railway.json` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç production —Å–µ—Ä–≤–µ—Ä
- `Dockerfile` - —Å–æ–±–∏—Ä–∞–µ—Ç production –≤–µ—Ä—Å–∏—é
- `build-production.sh` - —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –±–µ–∑ vite

–¢–µ–ø–µ—Ä—å deployment –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫!